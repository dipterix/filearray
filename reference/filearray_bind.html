<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Merge and bind homogeneous file arrays — filearray_bind • filearray</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Merge and bind homogeneous file arrays — filearray_bind"><meta property="og:description" content="The file arrays to be merged must be homogeneous:
same data type, partition size, and partition length"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">filearray</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/performance.html">Performance Comparisons - (Numerical)</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/dipterix/filearray/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Merge and bind homogeneous file arrays</h1>
    <small class="dont-index">Source: <a href="https://github.com/dipterix/filearray/blob/HEAD/R/bind.R" class="external-link"><code>R/bind.R</code></a></small>
    <div class="hidden name"><code>filearray_bind.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The file arrays to be merged must be homogeneous:
same data type, partition size, and partition length</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">filearray_bind</span><span class="op">(</span>
  <span class="va">...</span>,
  .list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
  filebase <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span>,
  symlink <span class="op">=</span> <span class="cn">FALSE</span>,
  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,
  cache_ok <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>..., .list</dt>
<dd><p>file array instances</p></dd>
<dt>filebase</dt>
<dd><p>where to create merged array</p></dd>
<dt>symlink</dt>
<dd><p>whether to use <code><a href="https://rdrr.io/r/base/files.html" class="external-link">file.symlink</a></code>; if true,
then partition files will be symbolic-linked to the original arrays,
otherwise the partition files will be copied over. If you want your data
to be portable, do not use symbolic-links. The default value is <code>FALSE</code></p></dd>
<dt>overwrite</dt>
<dd><p>whether to overwrite when <code>filebase</code> already exists;
default is false, which raises errors</p></dd>
<dt>cache_ok</dt>
<dd><p>see 'Details', only used if <code>overwrite</code> is true.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A bound array in <code>'FileArray'</code> class.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The input arrays must share the same data type and partition size.
The dimension for each partition should also be the same. For example
an array <code>x1</code> has dimension \(100x20x30\) with partition size 
<code>1</code>, then each partition dimension is \(100x20x1\), and there are 
<code>30</code> partitions. <code>x1</code> can bind with another array of the same 
partition size. This means if <code>x2</code> has dimension
\(100x20x40\) and each partition size is <code>1</code>, then <code>x1</code> and 
<code>x2</code> can be merged.</p>
<p>If <code>filebase</code> exists and <code>overwrite</code> is <code>FALSE</code>, an error will 
always raise. If <code>overwrite=TRUE</code> and <code>cache_ok=FALSE</code>, then
the existing <code>filebase</code> will be erased and any data stored within will
be lost. 
If both <code>overwrite</code> and <code>cache_ok</code> are <code>TRUE</code>, then 
, before erasing <code>filebase</code>, the function validates the existing
array header and compare the header signatures. If the existing header
signature is the same as the array to be created, then the existing array 
will be returned. This <code>cache_ok</code> could be extremely useful when
binding large arrays with <code>symlink=FALSE</code> as the cache might avoid
moving files around. However, <code>cache_ok</code> should be enabled with caution.
This is because only the header information will be compared, but the 
partition data will not be compared. If the existing array was generated from
an old versions of the source arrays, but the data from the source arrays
has been altered, then the <code>cache_ok=TRUE</code> is rarely proper as the cache
is outdated.</p>
<p>The <code>symlink</code> option should be used with extra caution. Creating 
symbolic links is definitely faster than copying partition files. However, 
since the partition files are simply linked to the original partition files, 
changing to the input arrays will also affect the merged arrays, and 
vice versa; see 'Examples'. Also for arrays created from symbolic links, if 
the original 
arrays are deleted, while the merged arrays will not be invalidated, 
the corresponding partitions will no longer be accessible. Attempts to 
set deleted partitions will likely result in failure. Therefore
<code>symlink</code> should be set to true when creating merged arrays are
temporary for read-only purpose, and when speed and disk space is in
consideration. For extended reading, please check <code><a href="https://rdrr.io/r/base/files.html" class="external-link">files</a></code> 
for details.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">partition_size</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span class="r-in"><span class="va">type</span> <span class="op">&lt;-</span> <span class="st">"double"</span></span>
<span class="r-in"><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="filearray.html">filearray_create</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span>, type <span class="op">=</span> <span class="va">type</span>,</span>
<span class="r-in">    partition_size <span class="op">=</span> <span class="va">partition_size</span><span class="op">)</span></span>
<span class="r-in"><span class="va">x1</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span class="r-in"><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="filearray.html">filearray_create</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span>, type <span class="op">=</span> <span class="va">type</span>,</span>
<span class="r-in">    partition_size <span class="op">=</span> <span class="va">partition_size</span><span class="op">)</span></span>
<span class="r-in"><span class="va">x2</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">5</span><span class="op">:</span><span class="fl">6</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">y1</span> <span class="op">&lt;-</span> <span class="fu">filearray_bind</span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span>, symlink <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">y2</span> <span class="op">&lt;-</span> <span class="fu">filearray_bind</span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># y1 copies partition files, and y2 simply creates links </span></span>
<span class="r-in"><span class="co"># if symlink is supported</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">y1</span><span class="op">[</span><span class="op">]</span> <span class="op">-</span> <span class="va">y2</span><span class="op">[</span><span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    0    0    0</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># change x1</span></span>
<span class="r-in"><span class="va">x1</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># y1 is not affected</span></span>
<span class="r-in"><span class="va">y1</span><span class="op">[</span><span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    1    3    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    2    4    6</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># y2 changes </span></span>
<span class="r-in"><span class="va">y2</span><span class="op">[</span><span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    1    3    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    2    4    6</span>
<span class="r-in"></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Zhengjia Wang.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

